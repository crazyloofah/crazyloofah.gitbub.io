<!DOCTYPE html>
<html>
<head>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.15.1/dist/phaser-arcade-physics.min.js"></script>
</head>
<body>

    <script>
    var config = {
        type: Phaser.AUTO,
        width: 768,
        height: 416,
        physics: {
            default: 'arcade',
            arcade: {
                gravity: {y: 300},
                debug: false
            }
        },
        scene: {
            preload: preload,
            create: create,
            update: update,
        }
    };

    var game = new Phaser.Game(config);
    var platforms;
    var cursors;
    var character;

    function preload ()
    {
      {
      this.load.image('sky0', 'assets/Final/Background_0.png');
      this.load.image('sky1', 'assets/Final/Background_1.png');
      this.load.image('tiles', 'assets/mainlev_build.png')
      //this.load.tilemapTiledJSON('tilemap', 'assets/platform.json')
      this.load.image('ground', 'assets/platform.png');
      this.load.atlas('character', 'assets/test/robspritesheet.png', 'assets/test/robsprites.json');
    // this.load.spritesheet('dude', 
    //     'assets/dude.png',
    //     { frameWidth: 32, frameHeight: 48 });
    //   }
      }
    }
    function create ()
    { 
      {
        this.add.image(384, 208, 'sky0');
        this.add.image(384, 208, 'sky1');
        // const map = this.make.tilemap({key: 'tilemap'});
        // const tileset = map.addTilesetImage('mainlev_build', 'tiles');
        
        //creating 
        platforms = this.physics.add.staticGroup();
        platforms.create(400, 400, 'ground').setScale(2).refreshBody();

        // create all animations for game
        this.anims.create({key: 'standing', frames: this.anims.generateFrameNames('character', { prefix: 'standing', end: 1, zeroPad: 4 } 
        ), repeat: -1});

        this.anims.create({key: 'running', frames: this.anims.generateFrameNames('character', { prefix: 'running', end: 23, zeroPad: 4 } 
        ), repeat: -1});

        this.anims.create({key: 'jump', frames: this.anims.generateFrameNames('character', { prefix: 'jump', end: 13, zeroPad: 4 } 
        ), repeat: 0});

        character = this.physics.add.sprite(200, 200, 'character');
        this.physics.add.collider(character, platforms)

        cursors = this.input.keyboard.createCursorKeys();

    //   player = this.physics.add.sprite(100, 300, 'dude');

    //   player.setBounce(0.2);
    //   player.setCollideWorldBounds(true);

    //   this.anims.create({
    //   key: 'left',
    //   frames: this.anims.generateFrameNumbers('dude', { start: 0, end: 3 }),
    //   frameRate: 10,
    //   repeat: -1
    // });

    // this.anims.create({
    // key: 'turn',
    // frames: [ { key: 'dude', frame: 4 } ],
    // frameRate: 20
    // });

    // this.anims.create({
    // key: 'right',
    // frames: this.anims.generateFrameNumbers('dude', { start: 5, end: 8 }),
    // frameRate: 10,
    // repeat: -1
    // });

    // this.physics.add.collider(player, platforms);

    // cursors = this.input.keyboard.createCursorKeys();
    // }
    }
  }

  function update ()
  {


      if (cursors.left.isDown){    
        character.setVelocityX(-160);
        character.flipX = false;
        if (character.body.touching.down){
        character.anims.play('running', true);
        }
      } else if (cursors.right.isDown){
        character.setVelocityX(160);
        character.flipX = true;
        if (character.body.touching.down){
        character.anims.play('running', true);}
      } else {
        if (character.body.touching.down){
        character.setVelocityX(0);
        character.play('standing');}
      }
      if (cursors.up.isDown && character.body.touching.down){
        character.setVelocityY(-330);
        character.play('jump')
      }
// else if (cursors.right.isDown)
// {
//     player.setVelocityX(160);

//     player.anims.play('right', true);
// }
// else
// {
//     player.setVelocityX(0);

//     player.anims.play('turn');
// }

// if (cursors.up.isDown && player.body.touching.down)
// {
//     player.setVelocityY(-330);
// }
    }
    </script>

</body>
</html>